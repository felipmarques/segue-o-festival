<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Segue o Festival</title>
  <link rel="stylesheet" type="text/css" href="css/stylehome.css">
  <link rel="shortcut icon" href="favicon.ico" type="image/png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/airbnb.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTTXRN2iT3eCQI1QYX5XlOmJ6zJ6Nn1s5v1UdKnT05/7IWb6OHT7r3sEkYpHhXY+ZC6JX5OGGA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <header>
    <div class="logo">
      <h1><span class="azul">SEGUE</span><br><span class="azul">O FESTIVAL</span></h1>
    </div>
  </header>

  <section class="filtros">
    <button class="filtro-btn" id="filtro-estado">
      <i class="fas fa-map-pin"></i> Estado
    </button>
    <button class="filtro-btn" id="filtro-tipo">
      <i class="fas fa-ticket-alt"></i> Tipo de Evento
    </button>
    <input type="text" id="pesquisa-evento" placeholder="üîç Pesquise seus eventos" class="filtro-input" />
    <input type="text" id="local-evento" placeholder="üìå Buscar por local" class="filtro-input" />
    <input type="text" id="data-evento" placeholder="üìÖ Buscar por data" class="filtro-input" />
  </section>

  <section class="carrossel-container">
    <h2><span class="destaque">Destaques</span></h2>
    <div class="carrossel-wrapper">
      <button class="nav-btn" onclick="voltar()">‚ùÆ</button>
      <div id="carrossel" class="carrossel"></div>
      <button class="nav-btn" onclick="avancar()">‚ùØ</button>
    </div>
  </section>

  <section class="eventos-container" id="eventos"></section>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script>
    let index = 0;

    function exibirCarrossel(eventos) {
      const carrossel = document.getElementById("carrossel");
      carrossel.innerHTML = '';

      eventos.forEach(evento => {
        const img = document.createElement("img");
        img.src = evento.imagem ? `data:image/jpeg;base64,${evento.imagem}` : '/img/default.jpg';
        img.alt = evento.nome;
        carrossel.appendChild(img);
      });

      index = 0;
      atualizarCarrossel();
    }

    function atualizarCarrossel() {
      const carrossel = document.getElementById("carrossel");
      carrossel.style.transform = `translateX(-${index * 100}%)`;
    }

    function avancar() {
      const total = document.querySelectorAll('#carrossel img').length;
      index = (index + 1) % total;
      atualizarCarrossel();
    }

    function voltar() {
      const total = document.querySelectorAll('#carrossel img').length;
      index = (index - 1 + total) % total;
      atualizarCarrossel();
    }

    flatpickr("#data-evento", {
      dateFormat: "Y-m-d",
      inline: true,
      locale: "pt",
      onDayCreate: function (dObj, dStr, fp, dayElem) {
        // Exemplo: marcar dias com eventos do banco
        const diasComEventos = ["2025-05-04", "2025-05-10"];
        const data = dayElem.dateObj.toISOString().split('T')[0];
        if (diasComEventos.includes(data)) {
          dayElem.classList.add("highlighted-day");
        }
      }
    });

    // Adicionar l√≥gica para popular filtros e buscar eventos filtrados
    // Ex: buscar do banco os eventos filtrados por estado, tipo, texto, local e data
    function buscarEventosFiltrados() {
      const estado = document.getElementById('filtro-estado').value;
      const tipo = document.getElementById('filtro-tipo').value;
      const texto = document.getElementById('pesquisa-evento').value;
      const local = document.getElementById('local-evento').value;
      const data = document.getElementById('data-evento').value;

      // Buscar eventos no banco com esses filtros
      // fetch('/api/eventos?estado=' + estado + '&tipo=' + tipo + '...')
    }

    // Executar busca inicial do carrossel (eventos principais)
    function buscarEventosPrincipais() {
      // Buscar eventos principais no banco
      // fetch('/api/eventos/destaques')
      // exibirCarrossel(eventos)
    }

    buscarEventosPrincipais();
  </script>

  <style>
    .azul {
      color: #00bfff;
    }

    .destaque {
      border-bottom: 4px solid yellow;
    }

    .carrossel {
      display: flex;
      transition: transform 0.5s ease-in-out;
    }

    .nav-btn {
      background: gray;
      color: white;
      border: none;
      padding: 8px;
    }

    .highlighted-day {
      background-color: #ffd700 !important;
      border-radius: 50%;
    }

    .filtros {
      display: flex;
      gap: 8px;
      padding: 12px;
    }

    .filtro-btn, .filtro-input {
      border: 1px solid #ffeb3b;
      background: white;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 14px;
      box-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .filtro-btn i {
      margin-right: 6px;
      color: #f06292;
    }
  </style>
</body>

</html>
