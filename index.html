 <!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Segue O Festival!</title>
    <link rel="stylesheet" type="text/css" href="css/stylehome.css">
    <style>
        .menu {
            background-color: #007BFF;
            display: flex;
            justify-content: center;
            padding: 10px;
            gap: 20px;
        }
        .menu-item {
            position: relative;
            color: white;
            cursor: pointer;
            padding: 10px;
        }
        .dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            color: black;
            border: 1px solid #ccc;
            width: 150px;
        }
        .dropdown div {
            padding: 8px;
            cursor: pointer;
        }
        .dropdown div:hover {
            background-color: #ddd;
        }
    </style>
</head>

<body>
    <header class="cabecalho">
        <h3 class="cabecalho-titulo">Segue<br>O Festival!</h3>
        <div class="cabecalho-botoes">
            <button class="cabecalho-botao-entrar" onclick="location.href='login.html'">Entrar</button>
        </div>
    </header>

    <!-- Menu de Filtros -->
    <div class="menu">
        <div class="menu-item" onclick="toggleDropdown('estadoDropdown')">Estado
            <div id="estadoDropdown" class="dropdown"></div>
        </div>
        <div class="menu-item" onclick="toggleDropdown('tipoDropdown')">Tipo de Evento
            <div id="tipoDropdown" class="dropdown">
                <div onclick="filtrarEventos('', 'Música')">Música</div>
                <div onclick="filtrarEventos('', 'Festival')">Festival</div>
                <div onclick="filtrarEventos('', 'Concerto')">Concerto</div>
                <div onclick="filtrarEventos('', 'Religioso')">Religioso</div>
                <div onclick="filtrarEventos('', 'Palestra')">Palestra</div>
            </div>
        </div>
    </div>

    <main class="conteudo">
        <section class="conteudo-secundario">
            <div class="conteudo-secundario-destaque">
                <h1>Destaques</h1>
            </div>
            <div id="eventos-container" class="conteudo-secundario-linha"></div>
        </section>
    </main>

    <script>
        const estados = ["Acre", "Alagoas", "Amapá", "Amazonas", "Bahia", "Ceará", "Distrito Federal", "Espírito Santo", "Goiás", "Maranhão", "Mato Grosso", "Mato Grosso do Sul", "Minas Gerais", "Pará", "Paraíba", "Paraná", "Pernambuco", "Piauí", "Rio de Janeiro", "Rio Grande do Norte", "Rio Grande do Sul", "Rondônia", "Roraima", "Santa Catarina", "São Paulo", "Sergipe", "Tocantins"];
        
        function toggleDropdown(id) {
            document.getElementById(id).style.display = document.getElementById(id).style.display === 'block' ? 'none' : 'block';
        }
        
        function preencherEstados() {
            let dropdown = document.getElementById('estadoDropdown');
            estados.forEach(estado => {
                let div = document.createElement('div');
                div.textContent = estado;
                div.onclick = () => filtrarEventos(estado, '');
                dropdown.appendChild(div);
            });
        }
        
        async function carregarEventos() {
            try {
                const response = await fetch('/api/buscaeventos');
                const eventos = await response.json();
                exibirEventos(eventos);
            } catch (err) {
                console.error('Erro ao carregar eventos:', err);
            }
        }
        
        function exibirEventos(eventos) {
            const container = document.getElementById('eventos-container');
            container.innerHTML = '';
            eventos.forEach(evento => {
                let eventoDiv = document.createElement('div');
                eventoDiv.innerHTML = `<h3>${evento.nome}</h3><p>${evento.data}</p><p>${evento.local}</p>`;
                container.appendChild(eventoDiv);
            });
        }
        
        async function filtrarEventos(estado, tipo) {
            try {
                const response = await fetch('/api/buscaeventos');
                let eventos = await response.json();
                
                if (estado) {
                    eventos = eventos.filter(evento => evento.estado === estado);
                }
                if (tipo) {
                    eventos = eventos.filter(evento => evento.tipo === tipo);
                }
                
                exibirEventos(eventos);
            } catch (err) {
                console.error('Erro ao filtrar eventos:', err);
            }
        }

        window.onload = () => {
            preencherEstados();
            carregarEventos();
        };
    </script>
</body>
</html>

