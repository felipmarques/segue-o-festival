<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Segue o Festival</title>
    <link rel="stylesheet" type="text/css" href="css/stylehome.css">
</head>
<body>
    <header class="cabecalho">
        <h3 class="cabecalho-titulo">Segue<br>O Festival!</h3>
    </header>

    <main class="conteudo">
        <div class="conteudo-menu">
            <p>Músicas</p>
            <p>Evento</p>
            <p>Estados</p>
            <p>Ingressos</p>
            <p>Line-Up</p>
            <p>Especiais</p>
        </div>

        <section id="eventos-lista">
            <!-- Os eventos serão carregados aqui como links -->
        </section>
    </main>

    <script>
        // Função para carregar os eventos da API
        async function carregarEventos() {
            try {
                // Fazendo a requisição GET para a API para buscar os eventos
                const response = await fetch('/api/buscaeventos');
                const eventos = await response.json(); // Retorna os eventos como JSON

                // Seleciona a seção onde os eventos serão exibidos
                const eventosLista = document.getElementById('eventos-lista');

                // Verifica se há eventos
                if (eventos.length > 0) {
                    // Limpa o conteúdo atual da lista de eventos
                    eventosLista.innerHTML = '';

                    // Cria um link para cada evento
                    eventos.forEach(evento => {
                        const eventoLink = document.createElement('a');
                        eventoLink.href = `/paginaevento.html?id=${evento.id}`; // Redireciona para a página do evento com o ID
                        eventoLink.textContent = evento.nome; // Nome do evento como texto do link
                        eventoLink.classList.add('evento-link'); // Adiciona uma classe para estilizar

                        // Adiciona o link à lista de eventos
                        eventosLista.appendChild(eventoLink);
                        eventosLista.appendChild(document.createElement('br')); // Quebra de linha entre os eventos
                    });
                } else {
                    // Se não houver eventos, exibe uma mensagem
                    eventosLista.innerHTML = '<p>Nenhum evento encontrado.</p>';
                }
            } catch (error) {
                console.error('Erro ao carregar eventos:', error);
                document.getElementById('eventos-lista').innerHTML = '<p>Erro ao carregar eventos.</p>';
            }
        }

        // Chama a função para carregar os eventos assim que a página for carregada
        window.onload = carregarEventos;
    </script>
</body>
</html>

