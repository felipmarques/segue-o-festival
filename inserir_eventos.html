<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Evento</title>
    <link rel="stylesheet" type="text/css" href="css/insere_evento.css">
</head>
<body>

    <div class="container">
        <!-- Formul치rio de Cadastro -->
        <div class="formulario">
            <h2>Cadastro de Evento</h2>
            <form id="eventoForm">
                <label for="nome">Nome do Evento:</label>
                <input type="text" id="nome" name="nome" required>

                <label for="descricao">Descri칞칚o:</label>
                <textarea id="descricao" name="descricao" rows="4" required></textarea>

                <label for="cep">CEP:</label>
                <input type="text" id="cep" name="cep" required>

                <label for="endereco">Endere칞o:</label>
                <input type="text" id="endereco" name="endereco" required>

                <label for="link_ingresso">Link para Compra de Ingressos:</label>
                <input type="url" id="link_ingresso" name="link_ingresso" required>

                <label for="lineup">Line-Up:</label>
                <textarea id="lineup" name="lineup" rows="3" required></textarea>

                <button type="submit">Cadastrar Evento</button>
            </form>
            <div id="mensagemErro" style="color: red; margin-top: 10px;"></div>
        </div>

        <!-- 츼rea Informativa -->
        <div class="info">
            <div>
                <h2>Bem-Vindo ao Cadastro de Eventos!</h2>
                <p>Preencha os dados necess치rios para cadastrar seu evento e torn치-lo acess칤vel para o p칰blico.</p>
            </div>
        </div>
    </div>

    <!-- Script para enviar os dados para o backend -->
    <script>
        document.getElementById("eventoForm").addEventListener("submit", async function(event) {
            event.preventDefault(); // Impede o envio padr칚o do formul치rio

            const formData = new FormData(event.target);
            const mensagemErro = document.getElementById("mensagemErro");

            // Preparar dados para envio
            const eventoData = {
                nome: formData.get("nome"),
                descricao: formData.get("descricao"),
                cep: formData.get("cep"),
                endereco: formData.get("endereco"),
                link_ingresso: formData.get("link_ingresso"),
                line_up: formData.get("lineup"), // Alterado para 'line_up', conforme seu c칩digo
            };

            try {
                // Enviar os dados para o backend (API)
                const response = await fetch('/api/eventos', {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(eventoData),
                });

                if (!response.ok) throw new Error("Erro ao cadastrar o evento!");

                alert("游꿀 Evento cadastrado com sucesso!");
                document.getElementById("eventoForm").reset(); // Limpa os campos do formul치rio
                mensagemErro.textContent = ""; // Limpa a mensagem de erro
            } catch (error) {
                console.error('Erro:', error);
                mensagemErro.textContent = "丘멆잺 Erro ao cadastrar o evento. Tente novamente.";
            }
        });
    </script>

</body>
</html>
